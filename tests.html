<!doctype html>
<html>
    <head>
        <script type="text/javascript" src="shuntingYard.js"></script>
        <script type="text/javascript">
            function asString() {
                let argument = arguments[0];
                if (Array.isArray(argument)) {
                    return "[" + argument.map(asString).join(",") + "]";
                }
                return String(argument);
            }
            const parser = new ShuntingYard();
            function appendSuccess(cmd, expected) {
                const successContainer = document.getElementById("success");
                let message = cmd + " = " + expected;
                successContainer.appendChild(document.createElement("br"));
                successContainer.appendChild(document.createTextNode(message));
            }
            function appendFailure(cmd, expected, result) {
                const failContainer = document.getElementById("fail");
                let message = cmd + " = " + result + " not " + expected;
                failContainer.appendChild(document.createElement("br"));
                failContainer.appendChild(document.createTextNode(message));
            }
            function test(cmd, expected) {
                let cmdString = asString(cmd);
                let expectedString = asString(expected);
                let resultString = asString(parser.process(cmdString));
                if (resultString === expectedString) {
                    appendSuccess(cmdString, expectedString);
                } else {
                    appendFailure(cmdString, expectedString, resultString);
                }
            }
            window.onload = function() {
                test("", "");
                test("2","2");
                test("+2","2");
                test("-2","-2");
                test("3+2","5");
                test("3-2","1");
                test("3*2","6");
                test("3*-2","-6");
                test("-3*-2","6");
                test("PI", "3.14");
                test("-PI", "-3.14");
                test("()", "");
                test("(2)", "2");
                test("[]", "[]");
                test("[2]", "[2]");
                test("[2,3,4]", "[2,3,4]");
                test("2*[2,3,4]", "[4,6,8]");
                test("[2,3,4]+[6]", "[8,3,4]");
                test("[2,[3,4]]", "[2,[3,4]]");
                test("[2,-[3,4]]", "[2,[-3,-4]]");
                test("[2,3*[3,4]]", "[2,[9,12]]");
                test("MAX(2,10,-3)", "10");
                test("MIN(2,10,-3)", "-3");
            }
        </script>
    </head>
    <body>
        <div id="fail"><b>Failed tests:</b></div>
        <br />
        <div id="success"><b>Successful tests:</b></div>
    </body>
</html>
